# -*- mode: ruby -*-
# vi: set ft=ruby :

# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!
VAGRANTFILE_API_VERSION = "2"

$script = <<SCRIPT
su vagrant -c "cd /opt/rabbitmq-in-depth;git pull origin master"
SCRIPT

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.box = "gmr/rabbitmq-in-depth"
  config.vm.hostname = 'primary'
  config.vm.network :forwarded_port, guest: 1883, host: 1883
  config.vm.network :forwarded_port, guest: 5671, host: 5671
  config.vm.network :forwarded_port, guest: 5672, host: 5672
  config.vm.network :forwarded_port, guest: 8883, host: 8883
  config.vm.network :forwarded_port, guest: 8888, host: 8888
  config.vm.network :forwarded_port, guest: 8900, host: 8900
  config.vm.network :forwarded_port, guest: 9001, host: 9001
  config.vm.network :forwarded_port, guest: 15670, host: 15670
  config.vm.network :forwarded_port, guest: 15671, host: 15671
  config.vm.network :forwarded_port, guest: 15672, host: 15672
  config.vm.network :forwarded_port, guest: 61613, host: 61613
  config.vm.network :private_network, ip: "192.168.50.4"
  config.vm.provision "shell", inline: $script
end
